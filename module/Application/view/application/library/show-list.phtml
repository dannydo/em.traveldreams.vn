<div class="row row-offcanvas row-offcanvas-left">
<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
    <div class="well sidebar-nav">
        <div class="form-group">
            <input type="text" class="form-control" id="filter" placeholder="Enter your word">
        </div>
        <ul class="nav" id="word-list">
            <?php foreach($words as $word) : ?>
                <li class="word-list-item" id="<?php echo $word->WordId; ?>"><a><b class="word-item-heading"><?php echo $word->Word; ?></b>
                        <br>
                    <?php
                        $detail = strip_tags($word->Meaning);
                        $pos = (strlen($detail) > 30) ? strpos($detail, ' ', 30) : 30;
                        $pos = ($pos) ? $pos : 30;
                        echo substr($detail, 0, $pos).'...';
                    ?>
                    </a>
                </li>
            <?php endforeach; ?>
        </ul>
    </div>
    <!--/.well -->
</div>

    <div class="col-xs-12 col-sm-12 col-md-8">
        <div class="error-message"></div>
        <form class="form-horizontal" role="form" method="post" action="/word/get-word" id="content-word">

        </form>
    </div>
    <!--/span-->
</div>


<script>
    $(function() {
        $('#filter').fastLiveFilter('#word-list', {
            timeout: 200
        });
    });

    $('.word-list-item').click(function() {
        var wordId=$(this).attr('id');
        $('li.active.word-list-item').removeClass('active');
        $(this).addClass('active');
        $(".error-message").html('');
        $('body').showLoading( {
            'afterShow': function() {
                $.ajax({url:"/word/get-word/"+wordId,success:function(result){
                    $("#content-word").html(result);
                    $('body').hideLoading();
                }});
            }
        });
    });

    $(function () {
        $('form').bind('submit', function () {
            var word = $('#txtWord').val();
            var enMeaning = $('#meaningEN').val();
            var checkForm = true;

            $("#txtWord").parent().parent(".form-group").removeClass('has-error');
            $("#meaningEN").parent().parent(".form-group").removeClass('has-error');

            if((word == null) || (word == '')) {
                $(".error-message").html('<div class="alert alert-danger">Please add a word!</div>');
                $("#txtWord").parent().parent(".form-group").addClass('has-error');
                checkForm = false;
            } else {
                if((enMeaning==null || enMeaning == '')){
                    $(".error-message").html('<div class="alert alert-danger">Please add English meaning!</div>');
                    $("#meaningEN").parent().parent(".form-group").addClass('has-error');
                    checkForm = false;
                }
            }

            if (checkForm) {
                $(".error-message").html('');
                $('body').showLoading( {
                    'afterShow': function() {
                        $.ajax({
                            type: 'post',
                            url: '/word/get-word',
                            data: $('form').serialize(),
                            success: function (result) {
                                $("#content-word").html(result);
                                $('body').hideLoading();
                            }
                        });
                    }
                });
            }
            return false;
        });
    });

    <?php if($isLoadDataByWordId):?>
    <?php echo "$('#$wordId').click();"; ?>
    <?php endif; ?>
</script>