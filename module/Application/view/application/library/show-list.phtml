<div class="row row-offcanvas row-offcanvas-left">
<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
    <div class="well sidebar-nav">
        <div class="form-group">
            <input type="text" class="form-control" id="filter" placeholder="Enter your word">
        </div>
        <ul class="nav" id="word-list">
            <?php foreach($words as $word) : ?>
                <li class="word-list-item" id="<?php echo $word->WordId; ?>"><a><b class="word-item-heading"><?php echo $word->Word; ?></b>
                        <br>
                    <span><?php echo substr($word->Meaning, 0, 25).'...'; ?></span>
                    </a>
                </li>
            <?php endforeach; ?>
        </ul>
    </div>
    <!--/.well -->
</div>

    <div class="col-xs-12 col-sm-12 col-md-8">
        <div class="error-message"></div>
        <form class="form-horizontal" role="form" method="post" action="/word/get-word" enctype="multipart/form-data" id="content-word">

        </form>
    </div>
    <!--/span-->
</div>


<script>
    $(function() {
        $('#filter').fastLiveFilter('#word-list', {
            timeout: 200
        });
    });

    $('.word-list-item').click(function() {
        var wordId=$(this).attr('id');
        $('li.active.word-list-item').removeClass('active');
        $(this).addClass('active');
        $(".error-message").html('');
        $('body').showLoading( {
            'afterShow': function() {
                $.ajax({url:"/word/get-word/"+wordId,success:function(result){
                    $("#content-word").html(result);
                    $('body').hideLoading();
                }});
            }
        });
    });

    $('form').ajaxForm({
        url: '/word/get-word',
        beforeSubmit: validateForm,
        success: updateHtml
    });

    function updateHtml(result) {
        $("#content-word").html(result);
        $('body').hideLoading();
        $('li.active.word-list-item').find('b').first().html($("#txtWord").val());
        $('li.active.word-list-item').find('span').first().html($("#meaningEN").val().substring(0, 25) + '...');
    }

    function validateForm() {
        var word = $('#txtWord').val();
        var enMeaning = $('#meaningEN').val();
        var checkForm = true;

        $("#txtWord").parent().parent(".form-group").removeClass('has-error');
        $("#meaningEN").parent().parent(".form-group").removeClass('has-error');

        if((word == null) || (word == '')) {
            $(".error-message").html('<div class="alert alert-danger">Please add a word!</div>');
            $("#txtWord").parent().parent(".form-group").addClass('has-error');
            checkForm = false;
        } else if((enMeaning==null || enMeaning == '')){
            $(".error-message").html('<div class="alert alert-danger">Please add English meaning!</div>');
            $("#meaningEN").parent().parent(".form-group").addClass('has-error');
            checkForm = false;
        }
        else {
            $('#displayAddVoice').find('.voiceFileWord').each(function() {
                $(this).parent().parent(".form-group").removeClass('has-error');
                var ext = $(this).val().split('.').pop().toLowerCase();

                if($.inArray(ext, ['mp3']) == -1 && $(this).val() != '') {
                    $(".error-message").html('<div class="alert alert-danger">Please upload file with mp3 format!</div>');
                    $(this).parent().parent(".form-group").addClass('has-error');
                    checkForm=false;
                }
            });
        }

        if (checkForm) {
            $(".error-message").html('');
            $('body').showLoading( {
                'afterShow': function() {}
            });
        }

        return checkForm;
    }

    <?php if($isLoadDataByWordId):?>
    <?php echo "$('#$wordId').click();"; ?>
    <?php endif; ?>
</script>